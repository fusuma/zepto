<!DOCTYPE html>
<html>
<head>
  <title>Zepto Ajax unit tests</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <script src="../src/zepto.js"></script>
  <script src="../src/ajax.js"></script>
  <script src="evidence.js"></script>
</head>
<body>
  <h1>Zepto Ajax unit tests</h1>
  <p>
    See the browser console for results.
  </p>
  
  <div id='testAjaxLoad' style="display:none"></div>
  
  <script>
    Evidence.TestCase.extend('ZeptoAjaxTest', {
      
      testAjaxGet: function(t){
        t.pause();
        $.get('http://example.com/', function(response){
          t.resume(function(){
            this.assert(response);
          });
        });
      },

      testAjaxPost: function(t){
        t.pause();
        $.post('http://example.com/', function(response){
          t.resume(function(){
            this.assert(response);
          });
        });
      },

      testAjaxGetJSON: function(t){
        t.pause();
        $.getJSON('zepto.json', function(data){
          t.resume(function(){
            this.assertEqual(data.zepto, 'awesomeness');
          });
        });
      },
      
      testAjaxLoad: function(t) {
        var testElem = $('#testAjaxLoad');
        t.pause();
        testElem.load('testAjaxLoad.html', '#testDiv', function() {
          t.resume(function() {
            this.assertEqual(testElem.html(), 'Test123');
          });
        });
      },

      testAjaxRequestHeader: function(t){
        // @see Net Panel/Resources
        // TODO
      }

    });
  </script>
</body>
</html>